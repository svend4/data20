# ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ APK –¥–ª—è Android

## üìã –û–±–∑–æ—Ä

–í –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ Android APK —á–µ—Ä–µ–∑ GitHub Actions. APK —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è.

## üöÄ –°–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞ —Å–±–æ—Ä–∫–∏

### 1Ô∏è‚É£ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –ø—Ä–∏ Push

APK –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –ø—Ä–∏ push –≤ —Å–ª–µ–¥—É—é—â–∏–µ –≤–µ—Ç–∫–∏:

- `main` –∏–ª–∏ `master`
- –õ—é–±—ã–µ –≤–µ—Ç–∫–∏ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `claude/` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `claude/feature-123`)

**–£—Å–ª–æ–≤–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ `mobile-app/` –∏–ª–∏ —Å–∞–º workflow —Ñ–∞–π–ª.

```bash
# –ü—Ä–∏–º–µ—Ä: –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ mobile-app –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç—è—Ç —Å–±–æ—Ä–∫—É
git add mobile-app/
git commit -m "Update mobile app"
git push origin main
```

### 2Ô∏è‚É£ –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ GitHub UI

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ GitHub ‚Üí **Actions**
2. –í—ã–±–µ—Ä–∏—Ç–µ workflow **"ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ Android APK"**
3. –ù–∞–∂–º–∏—Ç–µ **"Run workflow"**
4. –£–∫–∞–∂–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - **–í–µ—Ä—Å–∏—è APK**: –Ω–∞–ø—Ä–∏–º–µ—Ä `1.0.0` –∏–ª–∏ `dev` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - **–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ release**: –æ—Ç–º–µ—Ç—å—Ç–µ, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å APK –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π release

### 3Ô∏è‚É£ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Release

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ Release –Ω–∞ GitHub, APK –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. –°–æ–±–∏—Ä–∞–µ—Ç—Å—è
2. –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω keystore)
3. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Release
4. –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

```bash
# –°–æ–∑–¥–∞—Ç—å release —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É
gh release create v1.0.0 --title "–í–µ—Ä—Å–∏—è 1.0.0" --notes "–û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞"
```

## üì• –ì–¥–µ —Å–∫–∞—á–∞—Ç—å —Å–æ–±—Ä–∞–Ω–Ω—ã–π APK

### –ò–∑ GitHub Actions Artifacts

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Actions** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—É—é —Å–±–æ—Ä–∫—É
2. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ —Ä–∞–∑–¥–µ–ª–∞ **Artifacts**
3. –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª `data20-mobile-{–≤–µ—Ä—Å–∏—è}.apk`

**–°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è**: 90 –¥–Ω–µ–π

### –ò–∑ Releases

–ï—Å–ª–∏ APK –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ Release:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Releases** (–Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
2. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é –≤–µ—Ä—Å–∏—é
3. –°–∫–∞—á–∞–π—Ç–µ APK –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ **Assets**

## üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–ø–∏—Å–∏ APK (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –ø–æ–¥–ø–∏—Å–∏ release APK –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Secrets:

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Keystore

```bash
cd mobile-app/android
keytool -genkey -v -keystore data20-release-key.jks \
  -keyalg RSA -keysize 2048 -validity 10000 \
  -alias data20
```

### –®–∞–≥ 2: –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ Keystore –≤ Base64

```bash
base64 -i data20-release-key.jks -o keystore.base64
```

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Secrets –≤ GitHub

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions** ‚Üí **New repository secret**

–°–æ–∑–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã:

| –ò–º—è —Å–µ–∫—Ä–µ—Ç–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|----------|
| `ANDROID_KEYSTORE_BASE64` | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ `keystore.base64` | Keystore –≤ base64 |
| `KEYSTORE_PASSWORD` | –ü–∞—Ä–æ–ª—å –æ—Ç keystore | –ü–∞—Ä–æ–ª—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ keystore |
| `KEY_ALIAS` | `data20` | Alias –∫–ª—é—á–∞ (–∏–∑ –∫–æ–º–∞–Ω–¥—ã keytool) |
| `KEY_PASSWORD` | –ü–∞—Ä–æ–ª—å –∫–ª—é—á–∞ | –ü–∞—Ä–æ–ª—å –∫–ª—é—á–∞ (–º–æ–∂–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å keystore) |

## üìä –ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ —Å–±–æ—Ä–∫—É

Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç:

1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Java 17, Flutter 3.16.0, Python 3.9)
2. ‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ Python tools
3. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Flutter –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (`flutter analyze`)
5. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–ø–∏—Å–∏ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–ª—é—á–∏)
6. ‚úÖ –°–±–æ—Ä–∫–∞ Release APK
7. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ APK –∫–∞–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
8. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Release (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

## üì± –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–±—Ä–∞–Ω–Ω–æ–º APK

- **–†–∞–∑–º–µ—Ä**: ~100MB
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è Android**: 7.0 (API 24)
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**: armeabi-v7a, arm64-v8a, x86, x86_64
- **–í–∫–ª—é—á–∞–µ—Ç**:
  - Python 3.9 runtime
  - FastAPI backend
  - 57+ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  - SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
  - –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Workflows

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ workflow —Ñ–∞–π–ª–æ–≤:

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ó–∞–ø—É—Å–∫ |
|------|-----------|--------|
| `android-apk-auto-build.yml` | **–û—Å–Ω–æ–≤–Ω–æ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ | Push, Release, Manual |
| `build-mobile-apk.yml` | –†–µ–∑–µ—Ä–≤–Ω—ã–π - —Å–±–æ—Ä–∫–∞ –¥–ª—è release | Release, Manual |
| `android-build.yml` | –£—Å—Ç–∞—Ä–µ–≤—à–∏–π (—Å –æ—à–∏–±–∫–æ–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω) | Release |

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: `android-apk-auto-build.yml`

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Actions ‚Üí Run workflow
# –í–µ—Ä—Å–∏—è: dev
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ release: –Ω–µ—Ç
```

APK –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ Artifacts —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.

### –ü—Ä–∏–º–µ—Ä 2: –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ª–∏–∑–∞

```bash
# –°–æ–∑–¥–∞–π—Ç–µ release
gh release create v1.0.0 \
  --title "Data20 Mobile v1.0.0" \
  --notes "–ü–µ—Ä–≤—ã–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ä–µ–ª–∏–∑"

# APK –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–µ—Ä–µ—Ç—Å—è –∏ –¥–æ–±–∞–≤–∏—Ç—Å—è –≤ release
```

### –ü—Ä–∏–º–µ—Ä 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ release

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Actions ‚Üí Run workflow
# –í–µ—Ä—Å–∏—è: 1.0.0
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ release: –¥–∞
```

APK –¥–æ–±–∞–≤–∏—Ç—Å—è –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–æ–∑–¥–∞–Ω–Ω—ã–π release.

## üîç –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–±–æ—Ä–∫–∏

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Actions**
2. –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–ø—É—Å–∫ workflow
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ job **"üì¶ –°–±–æ—Ä–∫–∞ APK"**
4. –†–∞—Å–∫—Ä–æ–π—Ç–µ –Ω—É–∂–Ω—ã–π —à–∞–≥ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π

## ‚ùó –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –°–±–æ—Ä–∫–∞ –ø–∞–¥–∞–µ—Ç –Ω–∞ —ç—Ç–∞–ø–µ Gradle

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é Java –≤ `android/build.gradle` - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 17.

### –û—à–∏–±–∫–∞ "keystore not found"

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ 4 —Å–µ–∫—Ä–µ—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ GitHub.

### APK –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ Artifacts

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ - –≤–æ–∑–º–æ–∂–Ω–æ, —Å–±–æ—Ä–∫–∞ —É–ø–∞–ª–∞ —Ä–∞–Ω—å—à–µ.

### Workflow –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç —Ñ–∞–π–ª—ã –≤ `mobile-app/`.

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Flutter Build APK Guide](https://docs.flutter.dev/deployment/android)
- [Android App Signing](https://developer.android.com/studio/publish/app-signing)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞](README.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–±–æ—Ä–∫–µ](mobile-app/BUILD_MOBILE_EMBEDDED.md)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Keystore](mobile-app/KEYSTORE_SETUP.md)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–±–æ—Ä–∫–æ–π:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ GitHub Actions
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã
3. –°–æ–∑–¥–∞–π—Ç–µ Issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

---

**–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏**: ~8-12 –º–∏–Ω—É—Ç
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2026-01-04
